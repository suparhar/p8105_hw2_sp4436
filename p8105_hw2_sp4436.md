p8105_hw2_sp4436
================
Sukhman Parhar
2025-09-29

``` r
#Load Packages 
library(tidyverse)
```

    ## ── Attaching core tidyverse packages ──────────────────────── tidyverse 2.0.0 ──
    ## ✔ dplyr     1.1.4     ✔ readr     2.1.5
    ## ✔ forcats   1.0.1     ✔ stringr   1.5.2
    ## ✔ ggplot2   4.0.0     ✔ tibble    3.3.0
    ## ✔ lubridate 1.9.4     ✔ tidyr     1.3.1
    ## ✔ purrr     1.1.0     
    ## ── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──
    ## ✖ dplyr::filter() masks stats::filter()
    ## ✖ dplyr::lag()    masks stats::lag()
    ## ℹ Use the conflicted package (<http://conflicted.r-lib.org/>) to force all conflicts to become errors

``` r
library(dplyr)

#Import and clean pols-month
pols <- read_csv("fivethirtyeight_datasets/pols-month.csv") %>%
  separate(mon, into = c("year", "month", "day"), sep = "-") %>%
  mutate(
    year = as.integer(year),
    month = as.integer(month),
    month = month.name[month],   # turn number into month name
    president = if_else(prez_gop == 1, "gop", "dem")
  ) %>%
  select(-prez_dem, -prez_gop, -day)
```

    ## Rows: 822 Columns: 9
    ## ── Column specification ────────────────────────────────────────────────────────
    ## Delimiter: ","
    ## dbl  (8): prez_gop, gov_gop, sen_gop, rep_gop, prez_dem, gov_dem, sen_dem, r...
    ## date (1): mon
    ## 
    ## ℹ Use `spec()` to retrieve the full column specification for this data.
    ## ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.

``` r
#Check to see if it worked 
head(pols)
```

    ## # A tibble: 6 × 9
    ##    year month    gov_gop sen_gop rep_gop gov_dem sen_dem rep_dem president
    ##   <int> <chr>      <dbl>   <dbl>   <dbl>   <dbl>   <dbl>   <dbl> <chr>    
    ## 1  1947 January       23      51     253      23      45     198 dem      
    ## 2  1947 February      23      51     253      23      45     198 dem      
    ## 3  1947 March         23      51     253      23      45     198 dem      
    ## 4  1947 April         23      51     253      23      45     198 dem      
    ## 5  1947 May           23      51     253      23      45     198 dem      
    ## 6  1947 June          23      51     253      23      45     198 dem

``` r
colnames(pols)
```

    ## [1] "year"      "month"     "gov_gop"   "sen_gop"   "rep_gop"   "gov_dem"  
    ## [7] "sen_dem"   "rep_dem"   "president"

``` r
unique(pols$president)
```

    ## [1] "dem" "gop"

``` r
#Clean snp
snp <- read_csv("fivethirtyeight_datasets/snp.csv") %>%
  separate(date, into = c("month", "day", "year"), sep = "/") %>%
  mutate(
    year = as.integer(year),
    year = if_else(year > 20, 1900 + year, 2000 + year),
    month = as.integer(month),
    month = month.name[month]
  ) %>%
  select(year, month, close)
```

    ## Rows: 787 Columns: 2
    ## ── Column specification ────────────────────────────────────────────────────────
    ## Delimiter: ","
    ## chr (1): date
    ## dbl (1): close
    ## 
    ## ℹ Use `spec()` to retrieve the full column specification for this data.
    ## ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.

``` r
#Check to see if it worked 
head(pols)
```

    ## # A tibble: 6 × 9
    ##    year month    gov_gop sen_gop rep_gop gov_dem sen_dem rep_dem president
    ##   <int> <chr>      <dbl>   <dbl>   <dbl>   <dbl>   <dbl>   <dbl> <chr>    
    ## 1  1947 January       23      51     253      23      45     198 dem      
    ## 2  1947 February      23      51     253      23      45     198 dem      
    ## 3  1947 March         23      51     253      23      45     198 dem      
    ## 4  1947 April         23      51     253      23      45     198 dem      
    ## 5  1947 May           23      51     253      23      45     198 dem      
    ## 6  1947 June          23      51     253      23      45     198 dem

``` r
colnames(pols)
```

    ## [1] "year"      "month"     "gov_gop"   "sen_gop"   "rep_gop"   "gov_dem"  
    ## [7] "sen_dem"   "rep_dem"   "president"

``` r
#Clean unemployment 
unemployment <- read_csv("fivethirtyeight_datasets/unemployment.csv") %>%
  pivot_longer(
    Jan:Dec,
    names_to = "month",
    values_to = "unemployment"           #Pivot longer made months into rows
  ) %>%
  mutate(
    month = match(month, month.abb),     #convert abbrev to numbers
    month = month.name[month]            #turn into full month name
  )
```

    ## Rows: 68 Columns: 13
    ## ── Column specification ────────────────────────────────────────────────────────
    ## Delimiter: ","
    ## dbl (13): Year, Jan, Feb, Mar, Apr, May, Jun, Jul, Aug, Sep, Oct, Nov, Dec
    ## 
    ## ℹ Use `spec()` to retrieve the full column specification for this data.
    ## ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.

``` r
#See if it worked 
head(unemployment)
```

    ## # A tibble: 6 × 3
    ##    Year month    unemployment
    ##   <dbl> <chr>           <dbl>
    ## 1  1948 January           3.4
    ## 2  1948 February          3.8
    ## 3  1948 March             4  
    ## 4  1948 April             3.9
    ## 5  1948 May               3.5
    ## 6  1948 June              3.6

``` r
tail(unemployment)
```

    ## # A tibble: 6 × 3
    ##    Year month     unemployment
    ##   <dbl> <chr>            <dbl>
    ## 1  2015 July                NA
    ## 2  2015 August              NA
    ## 3  2015 September           NA
    ## 4  2015 October             NA
    ## 5  2015 November            NA
    ## 6  2015 December            NA

``` r
colnames(unemployment)
```

    ## [1] "Year"         "month"        "unemployment"

``` r
#Fix year column in unemployment 
unemployment <- unemployment %>%
  rename(year = Year)

#Merge datasets together
merged_data <- pols %>%
  left_join(snp, by = c("year", "month")) %>%
  left_join(unemployment, by = c("year", "month"))

#Check merged data 
dim(merged_data)
```

    ## [1] 822  11

``` r
colnames(merged_data)
```

    ##  [1] "year"         "month"        "gov_gop"      "sen_gop"      "rep_gop"     
    ##  [6] "gov_dem"      "sen_dem"      "rep_dem"      "president"    "close"       
    ## [11] "unemployment"

``` r
head(merged_data)
```

    ## # A tibble: 6 × 11
    ##    year month    gov_gop sen_gop rep_gop gov_dem sen_dem rep_dem president close
    ##   <dbl> <chr>      <dbl>   <dbl>   <dbl>   <dbl>   <dbl>   <dbl> <chr>     <dbl>
    ## 1  1947 January       23      51     253      23      45     198 dem          NA
    ## 2  1947 February      23      51     253      23      45     198 dem          NA
    ## 3  1947 March         23      51     253      23      45     198 dem          NA
    ## 4  1947 April         23      51     253      23      45     198 dem          NA
    ## 5  1947 May           23      51     253      23      45     198 dem          NA
    ## 6  1947 June          23      51     253      23      45     198 dem          NA
    ## # ℹ 1 more variable: unemployment <dbl>

## Problem 1 Summary

The `pols` dataset contains information about the number of national
politicians by party from 1947 to 2015, with variables including the
counts of governors, senators, and representatives, as well as an
indicator of whether the president was a Democrat or Republican. The
dataset has 822 rows and 9 columns, covering the years 1947 through
2015.

The `snp` dataset contains monthly closing values of the S&P stock index
from 1950 to 2015. It has 787 rows and 3 columns, covering the years
1950 through 2015.

The `unemployment` dataset includes monthly unemployment rates from 1948
to 2015, with 816 rows and 3 columns, covering the years 1948 through
2015.

After merging, the combined dataset contains 822 rows and 11 columns.
Each row corresponds to a unique year–month, and the variables include
political party, the president’s party, S&P closing values, and
unemployment rates. The merged dataset spans the years 1947 through
2015.

``` r
#load packages
library(readxl)
library(janitor)
```

    ## 
    ## Attaching package: 'janitor'

    ## The following objects are masked from 'package:stats':
    ## 
    ##     chisq.test, fisher.test

``` r
#Clean Mr trash
mr_trash <- read_excel(
  "202509 Trash Wheel Collection Data.xlsx",
  sheet = "Mr. Trash Wheel",
  skip = 1
) %>%
  clean_names() %>%
  drop_na(dumpster) %>%
  select(-starts_with("...")) %>%   # remove extra empty columns
  mutate(
    year = as.integer(year),
    sports_balls = as.integer(round(sports_balls, 0)), 
    wheel = "Mr. Trash Wheel"
  )
```

    ## New names:
    ## • `` -> `...15`
    ## • `` -> `...16`

``` r
# Clean Professor Trash Wheel
prof_trash <- read_excel(
  "202509 Trash Wheel Collection Data.xlsx",
  sheet = "Professor Trash Wheel",
  skip = 1
) %>%
  clean_names() %>%
  drop_na(dumpster) %>%
  select(-starts_with("...")) %>%
  mutate(
    wheel = "Professor Trash Wheel",
    year = as.integer(year)
  )

# Clean Gwynnda Trash Wheel
gwynnda_trash <- read_excel(
  "202509 Trash Wheel Collection Data.xlsx",
  sheet = "Gwynns Falls Trash Wheel",
  skip = 1
) %>%
  clean_names() %>%
  drop_na(dumpster) %>%
  select(-starts_with("...")) %>%
  mutate(
    wheel = "Gwynnda Trash Wheel",
    year = as.integer(year)
  )

#Combine into one dataset
trash_wheel <- bind_rows(mr_trash, prof_trash, gwynnda_trash)

#Check to see if the combine worked
dim(trash_wheel)
```

    ## [1] 1188   17

``` r
colnames(trash_wheel)
```

    ##  [1] "dumpster"           "month"              "year"              
    ##  [4] "date"               "weight_tons"        "volume_cubic_yards"
    ##  [7] "plastic_bottles"    "polystyrene"        "cigarette_butts"   
    ## [10] "glass_bottles"      "plastic_bags"       "wrappers"          
    ## [13] "sports_balls"       "homes_powered"      "x15"               
    ## [16] "x16"                "wheel"

``` r
head(trash_wheel)
```

    ## # A tibble: 6 × 17
    ##   dumpster month  year date                weight_tons volume_cubic_yards
    ##      <dbl> <chr> <int> <dttm>                    <dbl>              <dbl>
    ## 1        1 May    2014 2014-05-16 00:00:00        4.31                 18
    ## 2        2 May    2014 2014-05-16 00:00:00        2.74                 13
    ## 3        3 May    2014 2014-05-16 00:00:00        3.45                 15
    ## 4        4 May    2014 2014-05-17 00:00:00        3.1                  15
    ## 5        5 May    2014 2014-05-17 00:00:00        4.06                 18
    ## 6        6 May    2014 2014-05-20 00:00:00        2.71                 13
    ## # ℹ 11 more variables: plastic_bottles <dbl>, polystyrene <dbl>,
    ## #   cigarette_butts <dbl>, glass_bottles <dbl>, plastic_bags <dbl>,
    ## #   wrappers <dbl>, sports_balls <int>, homes_powered <dbl>, x15 <lgl>,
    ## #   x16 <lgl>, wheel <chr>

``` r
table(trash_wheel$wheel)
```

    ## 
    ##   Gwynnda Trash Wheel       Mr. Trash Wheel Professor Trash Wheel 
    ##                   349                   707                   132

The combined Trash Wheel dataset contains 1188 observations and 17
variables. It spans from 2014 to 2025. Key variables include
`weight_tons`, `plastic_bottles`, `cigarette_butts`, and
`homes_powered`, as well as the `wheel` variable that identifies whether
the trash was collected by Mr., Professor, or Gwynnda.

``` r
prof_total_weight <- trash_wheel %>%
  filter(wheel == "Professor Trash Wheel") %>%
  summarise(total_weight = sum(weight_tons, na.rm = TRUE))
```

The total weight of trash collected by Professor Trash Wheel is 282.3
tons.

``` r
gwynnda_butts_2022 <- trash_wheel %>%
  filter(wheel == "Gwynnda Trash Wheel", year == 2022, month == "June") %>%
  summarise(total_butts = sum(cigarette_butts, na.rm = TRUE))
```

In June 2022, Gwynnda collected a total of 1.812^{4} cigarette butts.
