---
title: "p8105_hw2_sp4436"
author: "Sukhman Parhar"
date: "2025-09-29"
output: github_document
---

```{r Problem 1}
#Load Packages 
library(tidyverse)
library(dplyr)

#Import and clean pols-month
pols <- read_csv("fivethirtyeight_datasets/pols-month.csv") %>%
  separate(mon, into = c("year", "month", "day"), sep = "-") %>%
  mutate(
    year = as.integer(year),
    month = as.integer(month),
    month = month.name[month],   # turn number into month name
    president = if_else(prez_gop == 1, "gop", "dem")
  ) %>%
  select(-prez_dem, -prez_gop, -day)

#Check to see if it worked 
head(pols)
colnames(pols)
unique(pols$president)

#Clean snp
snp <- read_csv("fivethirtyeight_datasets/snp.csv") %>%
  separate(date, into = c("month", "day", "year"), sep = "/") %>%
  mutate(
    year = as.integer(year),
    year = if_else(year > 20, 1900 + year, 2000 + year),
    month = as.integer(month),
    month = month.name[month]
  ) %>%
  select(year, month, close)

#Check to see if it worked 
head(pols)
colnames(pols)

#Clean unemployment 
unemployment <- read_csv("fivethirtyeight_datasets/unemployment.csv") %>%
  pivot_longer(
    Jan:Dec,
    names_to = "month",
    values_to = "unemployment"           #Pivot longer made months into rows
  ) %>%
  mutate(
    month = match(month, month.abb),     #convert abbrev to numbers
    month = month.name[month]            #turn into full month name
  )

#See if it worked 
head(unemployment)
tail(unemployment)
colnames(unemployment)

#Fix year column in unemployment 
unemployment <- unemployment %>%
  rename(year = Year)

#Merge datasets together
merged_data <- pols %>%
  left_join(snp, by = c("year", "month")) %>%
  left_join(unemployment, by = c("year", "month"))

#Check merged data 
dim(merged_data)
colnames(merged_data)
head(merged_data)
```

## Problem 1 Summary
The `pols` dataset contains information about the number of national politicians by party from 1947 to 2015, with variables including the counts of governors, senators, and representatives, as well as an indicator of whether the president was a Democrat or Republican. The dataset has `r nrow(pols)` rows and `r ncol(pols)` columns, covering the years `r min(pols$year)` through `r max(pols$year)`.

The `snp` dataset contains monthly closing values of the S&P stock index from 1950 to 2015. It has `r nrow(snp)` rows and `r ncol(snp)` columns, covering the years `r min(snp$year)` through `r max(snp$year)`.

The `unemployment` dataset includes monthly unemployment rates from 1948 to 2015, with `r nrow(unemployment)` rows and `r ncol(unemployment)` columns, covering the years `r min(unemployment$year)` through `r max(unemployment$year)`.

After merging, the combined dataset contains `r nrow(merged_data)` rows and `r ncol(merged_data)` columns. Each row corresponds to a unique year–month, and the variables include political party, the president’s party, S&P closing values, and unemployment rates. The merged dataset spans the years `r min(merged_data$year)` through `r max(merged_data$year)`.

```{r Problem 2}
#load packages
library(readxl)
library(janitor)

#Clean Mr trash
mr_trash <- read_excel(
  "202509 Trash Wheel Collection Data.xlsx",
  sheet = "Mr. Trash Wheel",
  skip = 1
) %>%
  clean_names() %>%
  drop_na(dumpster) %>%
  select(-starts_with("...")) %>%   # remove extra empty columns
  mutate(
    year = as.integer(year),
    sports_balls = as.integer(round(sports_balls, 0)), 
    wheel = "Mr. Trash Wheel"
  )

# Clean Professor Trash Wheel
prof_trash <- read_excel(
  "202509 Trash Wheel Collection Data.xlsx",
  sheet = "Professor Trash Wheel",
  skip = 1
) %>%
  clean_names() %>%
  drop_na(dumpster) %>%
  select(-starts_with("...")) %>%
  mutate(
    wheel = "Professor Trash Wheel",
    year = as.integer(year)
  )

# Clean Gwynnda Trash Wheel
gwynnda_trash <- read_excel(
  "202509 Trash Wheel Collection Data.xlsx",
  sheet = "Gwynns Falls Trash Wheel",
  skip = 1
) %>%
  clean_names() %>%
  drop_na(dumpster) %>%
  select(-starts_with("...")) %>%
  mutate(
    wheel = "Gwynnda Trash Wheel",
    year = as.integer(year)
  )

#Combine into one dataset
trash_wheel <- bind_rows(mr_trash, prof_trash, gwynnda_trash)

#Check to see if the combine worked
dim(trash_wheel)
colnames(trash_wheel)
head(trash_wheel)

table(trash_wheel$wheel)

```

The combined Trash Wheel dataset contains `r nrow(trash_wheel)` observations and `r ncol(trash_wheel)` variables. It spans from `r min(trash_wheel$year, na.rm = TRUE)` to `r max(trash_wheel$year, na.rm = TRUE)`. Key variables include `weight_tons`, `plastic_bottles`, `cigarette_butts`, and `homes_powered`, as well as the `wheel` variable that identifies whether the trash was collected by Mr., Professor, or Gwynnda.

```{r Total weight of trash collected by Professor Trash Wheel}
prof_total_weight <- trash_wheel %>%
  filter(wheel == "Professor Trash Wheel") %>%
  summarise(total_weight = sum(weight_tons, na.rm = TRUE))
```

The total weight of trash collected by Professor Trash Wheel is `r round(prof_total_weight$total_weight, 1)` tons.

```{r Total cigarette butts collected by Gwynnda in June 2022}
gwynnda_butts_2022 <- trash_wheel %>%
  filter(wheel == "Gwynnda Trash Wheel", year == 2022, month == "June") %>%
  summarise(total_butts = sum(cigarette_butts, na.rm = TRUE))
```

In June 2022, Gwynnda collected a total of `r gwynnda_butts_2022$total_butts` cigarette butts.
